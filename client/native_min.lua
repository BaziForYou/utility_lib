_G["ESX"],_G["xPlayer"],_G["source"],_G["developer"]=nil,nil,GetPlayerServerId(PlayerId()),function()end;local a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=AddTextEntry,BeginTextCommandDisplayHelp,EndTextCommandDisplayHelp,SetNotificationTextEntry,AddTextComponentSubstringPlayerName,DrawNotification,GetEntityCoords,World3dToScreen2d,SetTextScale,SetTextFont,SetTextEntry,SetTextCentre,AddTextComponentString,DrawText,DoesEntityExist,GetDistanceBetweenCoords,GetPlayerPed,TriggerEvent,TriggerServerEvent;local t={["ESC"]=322,["F1"]=288,["F2"]=289,["F3"]=170,["F5"]=166,["F6"]=167,["F7"]=168,["F8"]=169,["F9"]=56,["F10"]=57,["~"]=243,["1"]=157,["2"]=158,["3"]=160,["4"]=164,["5"]=165,["6"]=159,["7"]=161,["8"]=162,["9"]=163,["-"]=84,["="]=83,["BACKSPACE"]=177,["TAB"]=37,["Q"]=44,["W"]=32,["E"]=38,["R"]=45,["T"]=245,["Y"]=246,["U"]=303,["P"]=199,["["]=39,["]"]=40,["ENTER"]=18,["CAPS"]=137,["A"]=34,["S"]=8,["D"]=9,["F"]=23,["G"]=47,["H"]=74,["K"]=311,["L"]=182,["LEFTSHIFT"]=21,["Z"]=20,["X"]=73,["C"]=26,["V"]=0,["B"]=29,["N"]=249,["M"]=244,[","]=82,["."]=81,["LEFTCTRL"]=36,["LEFTALT"]=19,["SPACE"]=22,["RIGHTCTRL"]=70,["HOME"]=213,["PAGEUP"]=10,["PAGEDOWN"]=11,["DELETE"]=178,["LEFT"]=174,["RIGHT"]=175,["TOP"]=27,["DOWN"]=173,["NENTER"]=201,["N4"]=108,["N5"]=60,["N6"]=107,["N+"]=96,["N-"]=97,["N7"]=117,["N8"]=61,["N9"]=118}_G["Utility"]={Cache={PlayerPedId=PlayerPedId(),Marker={},Object={},Dialogue={},Emitter={},SetData={}}}On=function(type,u,v)if string.find(type,"_change")then type=type..source end;local w={res=GetCurrentResourceName(),a=u,b=v}r("Utility:Create","Emitter",type,w,GetCurrentResourceName())end;_G.old_TaskVehicleDriveToCoord=TaskVehicleDriveToCoord;TaskVehicleDriveToCoord=function(x,y,z,A,B)old_TaskVehicleDriveToCoord(x,y,z,A or 10.0,0,GetEntityModel(y),2883621,B or 1.0)end;_G.old_DisableControlAction=DisableControlAction;DisableControlAction=function(C,D)return old_DisableControlAction(0,t[string.upper(C)],true or D)end;DisableControlForSeconds=function(C,E)local F=E;Citizen.CreateThread(function()while F>0 do Citizen.Wait(1000)F=F-1 end;return end)Citizen.CreateThread(function()while F>0 do DisableControlAction(t[string.upper(C)])Citizen.Wait(1)end;return end)end;_G.old_IsControlJustPressed=IsControlJustPressed;IsControlJustPressed=function(G,H)developer("^2Created^0","key map",G)RegisterKeyMapping('utility '..G,'',"keyboard",G)AddEventHandler("Utility:Pressed_"..G,H)end;ShowNotification=function(I)d('STRING')e(I)f(false,true)end;ButtonNotification=function(I)if string.match(I,"{.*}")then I=string.multigsub(I,{"{A}","{B}","{C}","{D}","{E}","{F}","{G}","{H}","{L}","{M}","{N}","{O}","{P}","{Q}","{R}","{S}","{T}","{U}","{V}","{W}","{X}","{Y}","{Z}"},{"~INPUT_VEH_FLY_YAW_LEFT~","~INPUT_SPECIAL_ABILITY_SECONDARY~","~INPUT_LOOK_BEHIND~","~INPUT_MOVE_LR~","~INPUT_CONTEXT~","~INPUT_ARREST~","~INPUT_DETONATE~","~INPUT_VEH_ROOF~","~INPUT_CELLPHONE_CAMERA_FOCUS_LOCK~","~INPUT_INTERACTION_MENU~","~INPUT_REPLAY_ENDPOINT~","~INPUT_FRONTEND_PAUSE~","~INPUT_FRONTEND_LB~","~INPUT_RELOAD~","~INPUT_MOVE_DOWN_ONLY~","~INPUT_MP_TEXT_CHAT_ALL~","~INPUT_REPLAY_SCREENSHOT~","~INPUT_NEXT_CAMERA~","~INPUT_MOVE_UP_ONLY~","~INPUT_VEH_HOTWIRE_LEFT~","~INPUT_VEH_DUCK~","~INPUT_MP_TEXT_CHAT_TEAM~","~INPUT_HUD_SPECIAL~"})end;a('ButtonNotification',I)b('ButtonNotification')c(0,false,true,-1)end;FloatingNotification=function(I,J)a('FloatingNotification',I)SetFloatingHelpTextWorldPosition(1,J)SetFloatingHelpTextStyle(1,1,2,-1,3,0)b('FloatingNotification')c(2,false,false,-1)end;MakeEntityFaceEntity=function(K,L,M)local N=g(K,true)local O=g(L,true)if M then local P=GetHeadingFromVector_2d(O.x-N.x,O.y-N.y)SetEntityHeading(K,P)else local P=GetHeadingFromVector_2d(N.x-O.x,N.y-O.y)SetEntityHeading(L,P)end end;DrawText3Ds=function(J,Q,R,S,T)local U,V,W=h(J.x,J.y,J.z)if U then i(R or 0.35,R or 0.35)j(S or 4)k("STRING")l(1)m(Q)n(V,W)if T then local X=string.len(Q)/370;DrawRect(V,W+0.0125,0.025+X,0.025,0,0,0,90)end end end;_G.old_TaskPlayAnim=TaskPlayAnim;TaskPlayAnim=function(x,Y,...)if not HasAnimDictLoaded(Y)then RequestAnimDict(Y)while not HasAnimDictLoaded(Y)do Citizen.Wait(1)end end;old_TaskPlayAnim(x,Y,...)RemoveAnimDict(Y)end;_G.old_CreateObject=CreateObject;CreateObject=function(Z,...)if type(Z)=="string"then Z=GetHashKey(Z)end;if not HasModelLoaded(Z)then RequestModel(Z)while not HasModelLoaded(Z)do Citizen.Wait(1)end end;local _=old_CreateObject(Z,...)SetModelAsNoLongerNeeded(Z)local a0=0;if NetworkGetEntityIsNetworked(_)then a0=ObjToNet(_)SetNetworkIdExistsOnAllMachines(a0,true)SetNetworkIdCanMigrate(a0,true)end;return _,a0 end;_G.old_CreatePed=CreatePed;CreatePed=function(Z,...)if type(Z)=="string"then Z=GetHashKey(Z)end;if not HasModelLoaded(Z)then RequestModel(Z)while not HasModelLoaded(Z)do Citizen.Wait(1)end end;local x=old_CreatePed(0,Z,...)SetModelAsNoLongerNeeded(Z)local a0=0;if NetworkGetEntityIsNetworked(x)then a0=PedToNet(x)SetNetworkIdExistsOnAllMachines(a0,true)SetNetworkIdCanMigrate(a0,true)end;return x,a0 end;_G.old_CreateVehicle=CreateVehicle;CreateVehicle=function(Z,...)if type(Z)=="string"then Z=GetHashKey(Z)end;if not HasModelLoaded(Z)then RequestModel(Z)while not HasModelLoaded(Z)do Citizen.Wait(1)end end;local a1=old_CreateVehicle(Z,...)SetModelAsNoLongerNeeded(Z)local a0=0;if NetworkGetEntityIsNetworked(a1)then a0=VehToNet(a1)SetNetworkIdExistsOnAllMachines(a0,true)SetNetworkIdCanMigrate(a0,true)end;return a1,a0 end;_G.old_DeleteEntity=DeleteEntity;DeleteEntity=function(a2,a3)if not a3 then NetworkRequestControlOfEntity(a2)while not NetworkRequestControlOfEntity(a2)do Citizen.Wait(1)end;if not IsEntityAMissionEntity(a2)then SetEntityAsMissionEntity(a2)end;old_DeleteEntity(a2)else NetworkRequestControlOfNetworkId(a2)local a4=NetworkGetEntityFromNetworkId(a2)while not NetworkRequestControlOfEntity(a4)do Citizen.Wait(1)end;SetEntityAsMissionEntity(a4)old_DeleteEntity(a4)end end;_G.old_RegisterNetEvent=RegisterNetEvent;RegisterNetEvent=function(a5,a6)old_RegisterNetEvent(a5)AddEventHandler(a5,a6)end;_G.old_GetPlayerName=GetPlayerName;GetPlayerName=function(a7)return old_GetPlayerName(a7 or PlayerId())end;_G.old_PlayerPedId=PlayerPedId;PlayerPedId=function()if not o(Utility.Cache.PlayerPedId)then Utility.Cache.PlayerPedId=old_PlayerPedId()end;return Utility.Cache.PlayerPedId end;CreateLoop=function(H,a8)Citizen.CreateThread(function()local a9=true;local aa={}_break=function()a9=false end;LoopThread=function(a7,ab,H)if aa[a7]==nil then aa[a7]={a=true,b=false}end;if aa[a7].a then if not aa[a7].b then aa[a7].b=true;Citizen.SetTimeout(ab,function()H()aa[a7].b=false end)end end end;TaskBack=function(a7,H)LoopThread(a7,5000,function()H()end)end;TaskSlow=function(a7,H)LoopThread(a7,1000,function()H()end)end;TaskFast=function(a7,H)LoopThread(a7,500,function()H()end)end;TaskExtrafast=function(a7,H)LoopThread(a7,5,function()H()end)end;StopLoopThread=function(a7)aa[a7].a=false end;ResumeLoopThread=function(a7)aa[a7].a=true end;while a9 do H()Citizen.Wait(a8 or 5)end end)end;GetWorldClosestPed=function(ac)local ad=0;local ae=GetGamePool("CPed")local J=g(PlayerPedId())local af=ac+5.0;for ag=1,#ae do local ah=p(J,g(ae[ag]),false)if ah<=ac and ae[ag]~=PlayerPedId()then if af>ah then af=ah;ad=ae[ag]end end end;return ad,ae end;GetWorldClosestPlayer=function(ac)local ad=0;local ai={}local af=ac+5.0;local ae=GetGamePool("CPed")local J=g(PlayerPedId())for ag=1,#ae do if IsPedAPlayer(ae[ag])then table.insert(ai,NetworkGetPlayerIndexFromPed(ae[ag]))local ah=p(J,g(ae[ag]),false)if ah<=ac and ae[ag]~=PlayerPedId()then if af>ah then af=ah;ad=NetworkGetPlayerIndexFromPed(ae[ag])end end end end;return ad,ai end;GetEntitySurfaceMaterial=function(a2)local J=GetEntityCoords(a2)local aj=StartShapeTestCapsule(J.x,J.y,J.z,J.x,J.y,J.z-2.5,2,1,a2,7)local ak,al,ak,ak,am=GetShapeTestResultIncludingMaterial(aj)return am,al end;GetLoadoutOfPed=function(x)local an=ESX.GetWeaponList()local ao={}for ag=1,#an,1 do local hash=GetHashKey(an.name)if HasPedGotWeapon(x,hash,false)then table.insert(ao,{name=an.name,hash=hash,ammo=GetAmmoInPedWeapon(x,hash)})end end;return ao end;TriggerSyncedEvent=function(ap,aq,...)if type(aq)=="number"or type(aq)=="table"then if aq==-1 then s("Utility:SyncEvent",ap,"",...)else s("Utility:SyncEvent",ap,aq,...)end else developer("^2Error","you can use only number/table on whitelist of TriggerSyncedEvent","")end end;StartESX=function(a5,ar)TriggerEvent(a5 or'esx:getSharedObject',function(_)ESX=_ end)for ag=1,100 do if ESX==nil then TriggerEvent(a5 or'esx:getSharedObject',function(_)ESX=_ end)end end;if ar~=nil then RegisterNetEvent('esx:set'..string.upper(ar:sub(1,1))..ar:sub(2),function(as)xPlayer[ar]=as end)end;RegisterNetEvent('esx:setJob',function(as)xPlayer.job=as end)xPlayer=ESX.GetPlayerData()end;GetDataForJob=function(as)local at=nil;ESX.TriggerServerCallback("Utility:GetJobData",function(au)at=au end,as)while at==nil do Citizen.Wait(1)end;return#at,at end;local av=0;GetOnHandObject=function()return av end;TakeObjectOnHand=function(x,aw,ax,ay,az,aA,aB,aC,aD)developer("^2Taking^0","object",aw.." ("..GetEntityModel(aw)..")")if type(aw)=="number"then TaskPlayAnim(x,"anim@heists@box_carry@","idle",3.0,3.0,-1,63,0,0,0,0)Citizen.Wait(100)AttachEntityToEntity(aw,x,GetPedBoneIndex(x,60309),ay or 0.2,az or 0.08,aA or 0.2,aB or-45.0,aC or 290.0,aD or 0.0,true,true,false,true,1,true)av=aw elseif type(aw)=="string"then local J=g(x)local aE=CreateObject(aw,J+vector3(0.0,0.0,ax or 0.2),true,false,false)SetEntityAsMissionEntity(aE)TaskPlayAnim(x,"anim@heists@box_carry@","idle",3.0,-8,-1,63,0,0,0,0)Citizen.Wait(100)AttachEntityToEntity(aE,x,GetPedBoneIndex(x,60309),ay or 0.2,az or 0.08,aA or 0.2,aB or-45.0,aC or 290.0,aD or 0.0,true,true,false,true,1,true)av=aE;return aE end end;DropObjectFromHand=function(aF,aG)if aG then developer("^1Deleting^0","from hand",aF)DeleteEntity(aF)else developer("^3Dont delete^0","from hand",aF)DetachEntity(aF)SetEntityCoords(aF,GetOffsetFromEntityInWorldCoords(aF,0,0.5,0))PlaceObjectOnGroundProperly(aF)FreezeEntityPosition(aF,true)end;ClearPedTasks(PlayerPedId())av=0 end;SetFor=function(a7,aH,aI)if Utility.Cache["SetData"][a7]==nil then Utility.Cache["SetData"][a7]={}end;if type(aH)=="table"then for aJ,aK in pairs(aH)do developer("^2Setting^0","data","("..a7 ..") ["..aJ.." = "..json.encode(aK).."] {table}")Utility.Cache["SetData"][a7][aJ]=aK end else developer("^2Setting^0","data","("..a7 ..") ["..aH.." = "..json.encode(aI).."] {single}")Utility.Cache["SetData"][a7][aH]=aI end end;GetFrom=function(a7,aH)if aH==nil then aH="not defined"end;developer("^3Getting^0","data","("..a7 ..") ["..aH.."]")if Utility.Cache["SetData"][a7]~=nil then if aH=="not defined"then return Utility.Cache["SetData"][a7]else return Utility.Cache["SetData"][a7][aH]end else return nil end end;_g=function(aL,aI)TriggerEvent("Utility:RegisterGlobal",aL,aI)end;RegisterNetEvent("Utility:RegisterGlobal",function(aL,aI)_G[aL]=aI end)RandomId=function(aM)aM=aM or 5;local aN=""for ag=1,aM do aN=aN.."9"end;return math.random(0,aN)end;CreateMarker=function(a7,J,aO,aP,aQ)if DoesExist("m",a7)then Citizen.Wait(100)return else a7=string.gsub(a7,"{r}",RandomId())developer("^2Created^0","Marker",a7)local aR={render_distance=aO,interaction_distance=aP,coords=J}if type(aQ)=="table"then if aQ.rgb~=nil then aR.type=1;aR.rgb=aQ.rgb elseif aQ.text~=nil then aR.type=0;aR.text=aQ.text;r("Utility:Create","Marker",a7,aR)return else aR.type=1;aR.rgb={aQ[1],aQ[2],aQ[3]}r("Utility:Create","Marker",a7,aR)return end;if aQ.type~=nil and type(aQ.type)=="number"then aR._type=aQ.type end;if aQ.direction~=nil and type(aQ.direction)=="vector3"then aR._direction=aQ.direction end;if aQ.rotation~=nil and type(aQ.rotation)=="vector3"then aR._rot=aQ.rotation end;if aQ.scale~=nil and type(aQ.scale)=="vector3"then aR._scale=aQ.scale end;if aQ.alpha~=nil and type(aQ.alpha)=="number"then aR.alpha=aQ.alpha end;if aQ.animation~=nil and type(aQ.animation)=="boolean"then aR.anim=aQ.animation end;if aQ.notify~=nil then local aS=string.multigsub(aQ.notify,{"{A}","{B}","{C}","{D}","{E}","{F}","{G}","{H}","{L}","{M}","{N}","{O}","{P}","{Q}","{R}","{S}","{T}","{U}","{V}","{W}","{X}","{Y}","{Z}"},{"~INPUT_VEH_FLY_YAW_LEFT~","~INPUT_SPECIAL_ABILITY_SECONDARY~","~INPUT_LOOK_BEHIND~","~INPUT_MOVE_LR~","~INPUT_CONTEXT~","~INPUT_ARREST~","~INPUT_DETONATE~","~INPUT_VEH_ROOF~","~INPUT_CELLPHONE_CAMERA_FOCUS_LOCK~","~INPUT_INTERACTION_MENU~","~INPUT_REPLAY_ENDPOINT~","~INPUT_FRONTEND_PAUSE~","~INPUT_FRONTEND_LB~","~INPUT_RELOAD~","~INPUT_MOVE_DOWN_ONLY~","~INPUT_MP_TEXT_CHAT_ALL~","~INPUT_REPLAY_SCREENSHOT~","~INPUT_NEXT_CAMERA~","~INPUT_MOVE_UP_ONLY~","~INPUT_VEH_HOTWIRE_LEFT~","~INPUT_VEH_DUCK~","~INPUT_MP_TEXT_CHAT_TEAM~","~INPUT_HUD_SPECIAL~"})aR.notify=aS end elseif type(aQ)=="string"then aR.type=0;aR.text=aQ end;Utility.Cache.Marker[a7]=aR;r("Utility:Create","Marker",a7,aR)end end;SetMarkerType=function(a7,aT)if type(aT)~="number"then developer("^1Error^0","Type can be only a number","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7]._type=aT;r("Utility:Edit","Marker",a7,"_type",aT)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;SetMarkerDirection=function(a7,aU)if type(aU)~="vector3"then developer("^1Error^0","Direction can be only a vector3","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7]._direction=aU;r("Utility:Edit","Marker",a7,"_direction",aU)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;SetMarkerRotation=function(a7,aV)if type(aV)~="vector3"then developer("^1Error^0","Rotation can be only a vector3","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7]._rot=aV;r("Utility:Edit","Marker",a7,"_rot",aV)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;SetMarkerScale=function(a7,R)if type(R)~="vector3"then developer("^1Error^0","Scale can be only a vector3","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7]._scale=R;r("Utility:Edit","Marker",a7,"_scale",R)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;SetMarkerColor=function(a7,aW)if type(aW)~="table"then developer("^1Error^0","Color can be only a vector3","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7].rgb=aW;r("Utility:Edit","Marker",a7,"rgb",aW)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;SetMarkerAlpha=function(a7,aX)if type(aX)~="number"then developer("^1Error^0","Alpha can be only a number","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7].alpha=aX;r("Utility:Edit","Marker",a7,"alpha",aX)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;SetMarkerAnimation=function(a7,a9)if type(a9)~="boolean"then developer("^1Error  ^0","Animation can be only a boolean (true/false)","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7].anim=a9;r("Utility:Edit","Marker",a7,"anim",a9)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;SetMarkerDrawOnEntity=function(a7,a9)if type(a9)~="boolean"then developer("^1Error^0","Draw on entity can be only a boolean (true/false)","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7].draw_entity=a9;r("Utility:Edit","Marker",a7,"draw_entity",a9)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;Set3dTextScale=function(a7,R)if type(R)~="number"then developer("^1Error^0","Marker scale can be only a number","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7]._scale=R;r("Utility:Edit","Marker",a7,"_scale",R)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;Set3dTextDrawRect=function(a7,a9)if type(a9)~="boolean"then developer("^1Error^0","Marker rect can be only a boolean (true/false)","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7].rect=a9;r("Utility:Edit","Marker",a7,"rect",a9)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;Set3dTextFont=function(a7,S)if type(S)~="number"then developer("^1Error^0","Marker font can be only a number","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7].font=S;r("Utility:Edit","Marker",a7,"font",S)else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end end;DeleteMarker=function(a7)if not DoesExist("m",a7)then Citizen.Wait(100)return else developer("^1Deleted^0","Marker",a7)Utility.Cache.Marker[a7]=nil;r("Utility:Remove","Marker",a7)end end;CreateiObject=function(a7,aY,aZ,P,aP,a_)developer("^2Created^0 Object "..a7 .." ("..aY..")")local _=CreateObject(GetHashKey(aY),aZ.x,aZ.y,aZ.z,a_ or true,false,false)or nil;SetEntityHeading(_,P)SetEntityAsMissionEntity(_,true,true)FreezeEntityPosition(_,true)SetModelAsNoLongerNeeded(hash)_object={obj=_,coords=aZ,interaction_distance=aP or 3.0}Utility.Cache.Object[a7]=_object;r("Utility:Create","Object",a7,_object)return _,g(_)end;DeleteiObject=function(a7,aG)developer("^1Deleted^0","Object",a7)if aG then DeleteEntity(Utility.Cache.Object[a7].obj)end;Utility.Cache.Object[a7]=nil;r("Utility:Remove","Object",a7)end;CreateBlip=function(aL,J,b0,b1,R)developer("^2Created^0","Blip",aL)local b2=AddBlipForCoord(J)SetBlipSprite(b2,b0)SetBlipScale(b2,R or 1.0)SetBlipColour(b2,b1)SetBlipAsShortRange(b2,true)BeginTextCommandSetBlipName('STRING')e(aL)EndTextCommandSetBlipName(b2)return b2 end;SetIdOf=function(type,a7,b3)if type:lower()=="marker"or type:lower()=="m"then type="Marker"elseif type:lower()=="object"or type:lower()=="o"then type="Object"else return nil end;if DoesExist(type,a7)then Utility.Cache[type][b3]=Utility.Cache[type][a7]Utility.Cache[type][a7]=nil else developer("^1Error^0","Unable to set id of the "..type.." as it does not exist",a7)return end;developer("^3Change^0","Setted id to "..b3 .." of the id",a7)r("Utility:Remove",type,a7)r("Utility:Create",type,b3,Utility.Cache[type][b3])end;SetTextOf=function(type,a7,b4)if type:lower()=="marker"or type:lower()=="m"then type="Marker"elseif type:lower()=="object"or type:lower()=="o"then type="Object"else return nil end;if DoesExist(type,a7)then Utility.Cache[type][a7].text=b4;r("Utility:Edit",type,a7,"text",b4)else developer("^1Error^0","Unable to change text of the "..type.." as it does not exist",a7)return end;developer("^3Change^0","Setted text to "..b4 .." of the id",a7)end;GetDistanceFrom=function(type,a7)if type:lower()=="marker"or type:lower()=="m"then type="Marker"elseif type:lower()=="object"or type:lower()=="o"then type="Object"else return nil end;local ah=0.0;if Utility.Cache[type][a7].coords~=nil then return p(g(PlayerPedId()),Utility.Cache[type][a7].coords,true)else return false end end;GetCoordOf=function(type,a7)if type:lower()=="marker"or type:lower()=="m"then type="Marker"elseif type:lower()=="object"or type:lower()=="o"then type="Object"else return nil end;if DoesExist(type,a7)then return Utility.Cache[type][a7].coords else developer("^1Error^0","Unable to get the coords of the id",a7)return false end end;DoesExist=function(type,a7)if type:lower()=="marker"or type:lower()=="m"then type="Marker"elseif type:lower()=="object"or type:lower()=="o"then type="Object"else return nil end;if Utility.Cache[type][a7]~=nil then return true else return false end end;CreateCamera=function(J,b5,a9,b6)local b7=CreateCam("DEFAULT_SCRIPTED_CAMERA",true)SetCamCoord(b7,J)if b5~=nil then SetCamRot(b7,b5.x,b5.y,b5.z)end;if b6~=nil then ShakeCam(b7,b6.type or"",b6.amount or 0.0)end;if a9 then SetCamActive(b7,true)RenderScriptCams(1,1,1500,1,1)end;return b7 end;SwitchBetweenCam=function(b8,b7)SetCamActiveWithInterp(b7,b8,1500,1,1)Citizen.Wait(1600)DestroyCam(b8)end;DevMode=function(b9,ab,ba)if ab==nil then ab=true end;ba=ba or"%s %s %s"if b9 then developer=function(bb,type,a7)local ak,ak,ak,bc,bd,be=GetLocalTime()if ab then if type==nil then print(bc..":"..bd..":"..be.." - "..bb)else print(bc..":"..bd..":"..be.." - "..string.format(ba,bb,type,a7))end else if type==nil then print(bb)else print(string.format(ba,bb,type,a7))end end end else developer=function()end end end;ReplaceTexture=function(aE,bf,bg,bh,bi)local bj=CreateRuntimeTxd('duiTxd')local bk=CreateDui(bg,bh,bi)local bl=GetDuiHandle(bk)local bm=CreateRuntimeTextureFromDuiHandle(bj,'duiTex',bl)AddReplaceTexture(aE,bf,'duiTxd','duiTex')end;printd=function(bn)if type(bn)=="table"then print(json.encode(bn))else developer("^1Error","error dumping table "..bn.." why isnt a table","")end end;local bo=string.gsub;string.multigsub=function(string,table,bp)if type(table)then for ag=1,#table do string=bo(string,table[ag],bp[ag])end else for ag=1,#table do string=bo(string,table[ag],bp)end end;return string end;table.fexist=function(bn,bq)bn=bn[bq]if not bn then return false else return true end end;local br=table.remove;table.remove=function(bn,bs,bt)if type(bs)=="number"then br(bn,bs)elseif type(bs)=="string"then for aJ,aK in pairs(bn)do if aJ==bs then bn[aJ]=nil;if bt then break end end end end end;table.empty=function(bn)return next(bn)==nil end;table.clone=function(bn)bn.metatable={__index=bn}local bu={}setmetatable(bu,bn.metatable)return bu end;StartDialogue=function(a2,ah,bv)local _dialog={}_dialog={entity=a2,distance=ah,current_question=1,callback=bv}developer("^2Created^0","dialogue with entity",a2)return{Question=function(...)local bw={...}_dialog.questions=bw;return{Response=function(...)local bx={}local by={}for bz,bA in pairs({...})do by[bz]={}for aJ,aK in pairs(bA)do if bx[bz]==nil then bx[bz]=""end;bx[bz]=bx[bz]..aJ.."~w~ "..aK.." | "aJ=string.multigsub(aJ,{"%[","%]"},{"",""})aJ=string.multigsub(aJ,{"~r~","~b~","~g~","~y~","~p~","~o~","~c~","~m~","~u~","~n~","~s~","~w~"},{"","","","","","","","","","","",""})by[bz][aJ]=aK end;bx[bz]=bx[bz]:sub(1,-3)end;_dialog.response={no_formatted=by,formatted=bx}r("Utility:Create","Dialogue",a2,_dialog)Utility.Cache.Dialogue[a2]=_dialog;return{LastQuestion=function(bB)Utility.Cache.Dialogue[a2].lastq=bB;r("Utility:Edit","Dialogue",a2,"lastq",bB)end}end}end}end;EditDialogue=function(a2)if a2~=nil and IsEntityOnDialogue(a2)then return{Question=function(...)local bw={...}_dialog.questions=bw;return{Response=function(...)local bx={}local by={}for bz,bA in pairs({...})do by[bz]={}for aJ,aK in pairs(bA)do if bx[bz]==nil then bx[bz]=""end;bx[bz]=bx[bz]..aJ.."~w~ "..aK.." | "aJ=string.multigsub(aJ,{"%[","%]"},{"",""})aJ=string.multigsub(aJ,{"~r~","~b~","~g~","~y~","~p~","~o~","~c~","~m~","~u~","~n~","~s~","~w~"},{"","","","","","","","","","","",""})by[bz][aJ]=aK end;bx[bz]=bx[bz]:sub(1,-3)end;_dialog.response={no_formatted=by,formatted=bx}r("Utility:Remove","Dialogue",a2)r("Utility:Create","Dialogue",a2,_dialog)Utility.Cache.Dialogue[a2]=_dialog;return{LastQuestion=function(bB)Utility.Cache.Dialogue[a2].lastq=bB;r("Utility:Edit","Dialogue",a2,"lastq",bB)end}end}end}end end;StopDialogue=function(a2)if a2~=nil and IsEntityOnDialogue(a2)then developer("^1Stopping^0","dialogue",a2)if Utility.Cache.Dialogue[a2].lastq~=nil then local bC=0;local bD=Utility.Cache.Dialogue[a2].lastq;local bE=Utility.Cache.Dialogue[a2].entity;local bF=GetEntityCoords(bE)+vector3(0.0,0.0,1.0)CreateLoop(function()LoopThread(1,1000,function()bF=GetEntityCoords(bE)+vector3(0.0,0.0,1.0)bC=bC+1 end)if bC==3 then _break()end;DrawText3Ds(bF,bD,nil,nil,true)end)end;Utility.Cache.Dialogue[a2]=nil;r("Utility:Remove","Dialogue",a2)end end;IsEntityOnDialogue=function(a2)return Utility.Cache.Dialogue[a2]end
