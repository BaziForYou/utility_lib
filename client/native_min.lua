_G["ESX"],_G["xPlayer"],_G["source"],_G["developer"]=nil,nil,GetPlayerServerId(PlayerId()),function()end;local a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=AddTextEntry,BeginTextCommandDisplayHelp,EndTextCommandDisplayHelp,SetNotificationTextEntry,AddTextComponentSubstringPlayerName,DrawNotification,GetEntityCoords,World3dToScreen2d,SetTextScale,SetTextFont,SetTextEntry,SetTextCentre,AddTextComponentString,DrawText,DoesEntityExist,GetDistanceBetweenCoords,GetPlayerPed,TriggerEvent,TriggerServerEvent;local t={["ESC"]=322,["F1"]=288,["F2"]=289,["F3"]=170,["F5"]=166,["F6"]=167,["F7"]=168,["F8"]=169,["F9"]=56,["F10"]=57,["~"]=243,["1"]=157,["2"]=158,["3"]=160,["4"]=164,["5"]=165,["6"]=159,["7"]=161,["8"]=162,["9"]=163,["-"]=84,["="]=83,["BACKSPACE"]=177,["TAB"]=37,["Q"]=44,["W"]=32,["E"]=38,["R"]=45,["T"]=245,["Y"]=246,["U"]=303,["P"]=199,["["]=39,["]"]=40,["ENTER"]=18,["CAPS"]=137,["A"]=34,["S"]=8,["D"]=9,["F"]=23,["G"]=47,["H"]=74,["K"]=311,["L"]=182,["LEFTSHIFT"]=21,["Z"]=20,["X"]=73,["C"]=26,["V"]=0,["B"]=29,["N"]=249,["M"]=244,[","]=82,["."]=81,["LEFTCTRL"]=36,["LEFTALT"]=19,["SPACE"]=22,["RIGHTCTRL"]=70,["HOME"]=213,["PAGEUP"]=10,["PAGEDOWN"]=11,["DELETE"]=178,["LEFT"]=174,["RIGHT"]=175,["TOP"]=27,["DOWN"]=173,["NENTER"]=201,["N4"]=108,["N5"]=60,["N6"]=107,["N+"]=96,["N-"]=97,["N7"]=117,["N8"]=61,["N9"]=118}_G["Utility"]={Cache={PlayerPedId=PlayerPedId(),Marker={},Object={},Dialogue={},Emitter={},SetData={}}}On=function(type,u,v)if string.find(type,"_change")then type=type..source end;local w=Utility.Cache.Emitter;if w[type]==nil then w[type]={}end;w[type][#w+1]={a=u,b=v}r("Utility:UpdateTable","Emitter",Utility.Cache.Emitter)end;_G.old_TaskVehicleDriveToCoord=TaskVehicleDriveToCoord;TaskVehicleDriveToCoord=function(x,y,z,A,B)old_TaskVehicleDriveToCoord(x,y,z,A or 10.0,0,GetEntityModel(y),2883621,B or 1.0)end;_G.old_DisableControlAction=DisableControlAction;DisableControlAction=function(C,D)return old_DisableControlAction(0,t[C:upper()],true or D)end;DisableControlForSeconds=function(C,E)local F=E;Citizen.CreateThread(function()while F>0 do Citizen.Wait(1000)F=F-1 end;return end)Citizen.CreateThread(function()while F>0 do DisableControlAction(t[C:upper()])Citizen.Wait(1)end;return end)end;_G.old_IsControlJustPressed=IsControlJustPressed;IsControlJustPressed=function(G,H)print(G)developer("^2Created^0","key map",G)RegisterKeyMapping('utility '..G,'',"keyboard",G)AddEventHandler("Utility:Pressed_"..G,H)end;ShowNotification=function(I)d('STRING')e(I)f(false,true)end;ButtonNotification=function(I)if string.match(I,"{.*}")then I=string.multigsub(I,{"{A}","{B}","{C}","{D}","{E}","{F}","{G}","{H}","{L}","{M}","{N}","{O}","{P}","{Q}","{R}","{S}","{T}","{U}","{V}","{W}","{X}","{Y}","{Z}"},{"~INPUT_VEH_FLY_YAW_LEFT~","~INPUT_SPECIAL_ABILITY_SECONDARY~","~INPUT_LOOK_BEHIND~","~INPUT_MOVE_LR~","~INPUT_CONTEXT~","~INPUT_ARREST~","~INPUT_DETONATE~","~INPUT_VEH_ROOF~","~INPUT_CELLPHONE_CAMERA_FOCUS_LOCK~","~INPUT_INTERACTION_MENU~","~INPUT_REPLAY_ENDPOINT~","~INPUT_FRONTEND_PAUSE~","~INPUT_FRONTEND_LB~","~INPUT_RELOAD~","~INPUT_MOVE_DOWN_ONLY~","~INPUT_MP_TEXT_CHAT_ALL~","~INPUT_REPLAY_SCREENSHOT~","~INPUT_NEXT_CAMERA~","~INPUT_MOVE_UP_ONLY~","~INPUT_VEH_HOTWIRE_LEFT~","~INPUT_VEH_DUCK~","~INPUT_MP_TEXT_CHAT_TEAM~","~INPUT_HUD_SPECIAL~"})end;a('ButtonNotification',I)b('ButtonNotification')c(0,false,true,-1)end;FloatingNotification=function(I,J)a('FloatingNotification',I)SetFloatingHelpTextWorldPosition(1,J)SetFloatingHelpTextStyle(1,1,2,-1,3,0)b('FloatingNotification')c(2,false,false,-1)end;MakeEntityFaceEntity=function(K,L,M)local N=g(K,true)local O=g(L,true)if M then local P=GetHeadingFromVector_2d(O.x-N.x,O.y-N.y)SetEntityHeading(K,P)else local P=GetHeadingFromVector_2d(N.x-O.x,N.y-O.y)SetEntityHeading(L,P)end end;DrawText3Ds=function(J,Q,R,S,T)local U,V,W=h(J.x,J.y,J.z)if U then i(R or 0.35,R or 0.35)j(S or 4)k("STRING")l(1)m(Q)n(V,W)if T then local X=string.len(Q)/370;DrawRect(V,W+0.0125,0.025+X,0.025,0,0,0,90)end end end;_G.old_TaskPlayAnim=TaskPlayAnim;TaskPlayAnim=function(x,Y,...)if not HasAnimDictLoaded(Y)then RequestAnimDict(Y)while not HasAnimDictLoaded(Y)do Citizen.Wait(1)end end;old_TaskPlayAnim(x,Y,...)RemoveAnimDict(Y)end;_G.old_CreateObject=CreateObject;CreateObject=function(Z,...)if type(Z)=="string"then Z=GetHashKey(Z)end;if not HasModelLoaded(Z)then RequestModel(Z)while not HasModelLoaded(Z)do Citizen.Wait(1)end end;local _=old_CreateObject(Z,...)SetModelAsNoLongerNeeded(Z)local a0=0;if NetworkGetEntityIsNetworked(_)then a0=ObjToNet(_)SetNetworkIdExistsOnAllMachines(a0,true)SetNetworkIdCanMigrate(a0,true)end;return _,a0 end;_G.old_CreatePed=CreatePed;CreatePed=function(Z,...)if type(Z)=="string"then Z=GetHashKey(Z)end;if not HasModelLoaded(Z)then RequestModel(Z)while not HasModelLoaded(Z)do Citizen.Wait(1)end end;local x=old_CreatePed(0,Z,...)SetModelAsNoLongerNeeded(Z)local a0=0;if NetworkGetEntityIsNetworked(x)then a0=PedToNet(x)SetNetworkIdExistsOnAllMachines(a0,true)SetNetworkIdCanMigrate(a0,true)end;return x,a0 end;_G.old_CreateVehicle=CreateVehicle;CreateVehicle=function(Z,...)if type(Z)=="string"then Z=GetHashKey(Z)end;if not HasModelLoaded(Z)then RequestModel(Z)while not HasModelLoaded(Z)do Citizen.Wait(1)end end;local a1=old_CreateVehicle(Z,...)SetModelAsNoLongerNeeded(Z)local a0=0;if NetworkGetEntityIsNetworked(a1)then a0=VehToNet(a1)SetNetworkIdExistsOnAllMachines(a0,true)SetNetworkIdCanMigrate(a0,true)end;return a1,a0 end;_G.old_DeleteEntity=DeleteEntity;DeleteEntity=function(a2,a3)if not a3 then NetworkRequestControlOfEntity(a2)if not IsEntityAMissionEntity(a2)then SetEntityAsMissionEntity(a2)end;old_DeleteEntity(a2)else NetworkRequestControlOfNetworkId(a2)local a4=NetworkGetEntityFromNetworkId(a2)SetEntityAsMissionEntity(a4)old_DeleteEntity(a4)end end;_G.old_RegisterNetEvent=RegisterNetEvent;RegisterNetEvent=function(a5,a6)old_RegisterNetEvent(a5)AddEventHandler(a5,a6)end;_G.old_GetPlayerName=GetPlayerName;GetPlayerName=function(a7)return old_GetPlayerName(a7 or PlayerId())end;_G.old_PlayerPedId=PlayerPedId;PlayerPedId=function()if not o(Utility.Cache.PlayerPedId)then Utility.Cache.PlayerPedId=old_PlayerPedId()end;return Utility.Cache.PlayerPedId end;CreateLoop=function(H,a8)Citizen.CreateThread(function()local a9=true;local aa={}_break=function()a9=false end;LoopThread=function(a7,ab,H)if aa[a7]==nil then aa[a7]={a=true,b=false}end;if aa[a7].a then if not aa[a7].b then aa[a7].b=true;Citizen.SetTimeout(ab,function()H()aa[a7].b=false end)end end end;TaskBack=function(a7,H)LoopThread(a7,5000,function()H()end)end;TaskSlow=function(a7,H)LoopThread(a7,1000,function()H()end)end;TaskFast=function(a7,H)LoopThread(a7,500,function()H()end)end;TaskExtrafast=function(a7,H)LoopThread(a7,5,function()H()end)end;StopLoopThread=function(a7)aa[a7].a=false end;ResumeLoopThread=function(a7)aa[a7].a=true end;while a9 do H()Citizen.Wait(a8 or 5)end end)end;GetWorldClosestPed=function(ac)local ad=0;local ae=GetGamePool("CPed")local J=g(PlayerPedId())local af=ac+5.0;for ag=1,#ae do local ah=p(J,g(ae[ag]),false)if ah<=ac and ae[ag]~=PlayerPedId()then if af>ah then af=ah;ad=ae[ag]end end end;return ad,ae end;GetWorldClosestPlayer=function(ac)local ad=0;local ai={}local af=ac+5.0;local ae=GetGamePool("CPed")local J=g(PlayerPedId())for ag=1,#ae do if IsPedAPlayer(ae[ag])then table.insert(ai,NetworkGetPlayerIndexFromPed(ae[ag]))local ah=p(J,g(ae[ag]),false)if ah<=ac and ae[ag]~=PlayerPedId()then if af>ah then af=ah;ad=NetworkGetPlayerIndexFromPed(ae[ag])end end end end;return ad,ai end;GetEntitySurfaceMaterial=function(a2)local J=GetEntityCoords(a2)local aj=StartShapeTestCapsule(J.x,J.y,J.z,J.x,J.y,J.z-2.5,2,1,a2,7)local ak,al,ak,ak,am=GetShapeTestResultIncludingMaterial(aj)return am,al end;TriggerSyncedEvent=function(an,ao,...)if type(ao)=="number"or type(ao)=="table"then if ao==-1 then s("Utility:SyncEvent",an,"",...)else s("Utility:SyncEvent",an,ao,...)end else developer("^2Error","you can use only number/table on whitelist of TriggerSyncedEvent","")end end;StartESX=function(a5,ap)TriggerEvent(a5 or'esx:getSharedObject',function(_)ESX=_ end)for ag=1,100 do if ESX==nil then TriggerEvent(a5 or'esx:getSharedObject',function(_)ESX=_ end)end end;if ap~=nil then RegisterNetEvent('esx:set'..ap:sub(1,1):upper()..ap:sub(2),function(aq)xPlayer[ap]=aq end)end;RegisterNetEvent('esx:setJob',function(aq)xPlayer.job=aq end)xPlayer=ESX.GetPlayerData()end;GetDataForJob=function(aq)local ar=nil;ESX.TriggerServerCallback("Utility:GetJobData",function(as)ar=as end,aq)while ar==nil do Citizen.Wait(1)end;return#ar,ar end;AddItem=function(at,au)developer("^2Adding^0","item",at)s("Utility:AddItem",at,au)end;GetItem=function(at)developer("^3Getting^0","info",at)local av=nil;ESX.TriggerServerCallback("Utility:GetItem",function(aw)av=aw end,at)while av==nil do Citizen.Wait(1)end;return av end;RemoveItem=function(at,au)developer("^1Removing^0","item",at)s("Utility:RemoveItem",at,au)end;AddMoney=function(type,au)developer("^2Adding^0","money "..type,au)s("Utility:AddMoney",type,au)end;RemoveMoney=function(type,au)developer("^1Removing^0","money "..type,au)s("Utility:RemoveMoney",type,au)end;local ax=0;GetOnHandObject=function()return ax end;TakeObjectOnHand=function(x,ay,az,aA,aB,aC,aD,aE,aF)developer("^2Taking^0","object",ay.." ("..GetEntityModel(ay)..")")if type(ay)=="number"then TaskPlayAnim(x,"anim@heists@box_carry@","idle",3.0,3.0,-1,63,0,0,0,0)Citizen.Wait(100)AttachEntityToEntity(ay,x,GetPedBoneIndex(x,60309),aA or 0.2,aB or 0.08,aC or 0.2,aD or-45.0,aE or 290.0,aF or 0.0,true,true,false,true,1,true)ax=ay elseif type(ay)=="string"then local J=g(x)local aG=CreateObject(ay,J+vector3(0.0,0.0,az or 0.2),true,false,false)SetEntityAsMissionEntity(aG)TaskPlayAnim(x,"anim@heists@box_carry@","idle",3.0,-8,-1,63,0,0,0,0)Citizen.Wait(100)AttachEntityToEntity(aG,x,GetPedBoneIndex(x,60309),aA or 0.2,aB or 0.08,aC or 0.2,aD or-45.0,aE or 290.0,aF or 0.0,true,true,false,true,1,true)ax=aG;return aG end end;DropObjectFromHand=function(aH,aI)if aI then developer("^1Deleting^0","from hand",aH)DeleteEntity(aH)else developer("^3Dont delete^0","from hand",aH)DetachEntity(aH)SetEntityCoords(aH,GetOffsetFromEntityInWorldCoords(aH,0,0.5,0))PlaceObjectOnGroundProperly(aH)FreezeEntityPosition(aH,true)end;ClearPedTasks(PlayerPedId())ax=0 end;GetDataFromDb=function(aJ)aJ=aJ:gsub('[%c]','')aJ=aJ:gsub('"','')aJ=aJ:gsub('\'','')aJ=aJ:gsub('OR','')aJ=aJ:gsub('or','')local aK=nil;if not string.find(aJ,"WHERE")then local aL={select=string.match(aJ,"SELECT (.*)"),all=true}local aM=GetGameTimer()developer("^3MySQL^0 ^3REQUESTING^0","search filter^5","SELECT "..aL.select.." FROM utility_db_integration")ESX.TriggerServerCallback("Utility:GetDataFromDatabase",function(aN)aK=aN end,aL)while aK==nil do Citizen.Wait(5)end;developer("^3MySQL^0 ^2RESULT^0 (executed in "..(GetGameTimer()-aM)/1000 .."s)","search result^5",json.encode(aK))return aK else local aO={match=string.match(aJ,"WHERE (.*) =")or string.match(aJ,"WHERE (.*)="),equal=string.match(aJ,"= (.*)")or string.match(aJ,"=(.*)")}local aP={string="",where={},equal={}}for ak in(where_match..","):gmatch("([^,]*),")do aP.string=aP.string..ak.."=@"..ak..","table.insert(aP.where,ak)end;for ak in(equal_match..","):gmatch("([^,]*),")do table.insert(aP.equal,ak)end;local aL={select=string.match(aJ,"SELECT (.*) WHERE"),where=aP.where,string=aP.string,equal=aP.equal}local aM=GetGameTimer()developer("^3MySQL^0 ^3REQUESTING^0","search filter^5","SELECT "..aL.select.." FROM utility_db_integration WHERE "..aL.string:sub(1,-2))ESX.TriggerServerCallback("Utility:GetDataFromDatabase",function(aN)aK=aN end,aL)while aK==nil do Citizen.Wait(5)end;developer("^3MySQL^0 ^2RESULT^0 (executed in "..(GetGameTimer()-aM)/1000 .."s)","search result^5",json.encode(aK))return aK end end;SaveDataToDb=function(aJ)local aK=nil;local aQ={match=string.match(aJ,"INSERT (.*) =")or string.match(aJ,"INSERT (.*)="),equal=string.match(aJ,"= (.*)")or string.match(aJ,"=(.*)")}local aP={string="",set={},equal={}}for ak in(aQ.match..","):gmatch("([^,]*),")do aP.string=aP.string..ak.."=@"..ak..","table.insert(aP.set,ak)end;for ak in(aQ.equal..","):gmatch("([^,]*),")do table.insert(aP.equal,ak)end;local aL={set=aP.set,string=aP.string,equal=aP.equal}local aM=GetGameTimer()developer("^3MySQL^0 ^3REQUESTING^0","insert^5","INSERT INTO utility_db_integration SET "..aL.string:sub(1,-2))ESX.TriggerServerCallback("Utility:SaveDataToDb",function(aN)aK=aN end,aL)while aK==nil do Citizen.Wait(5)end;developer("^3MySQL^0 ^2RESULT^0 (executed in "..(GetGameTimer()-aM)/1000 .."s)","inserted^5",json.encode(aK))return aK end;UpdateDataToDb=function(aJ)aJ=aJ:gsub('[%c]','')aJ=aJ:gsub('"','')aJ=aJ:gsub('\'','')aJ=aJ:gsub('OR','')aJ=aJ:gsub('or','')local aQ={data=string.match(aJ,"UPDATE (.*) WHERE")}aQ.equal=string.match(aQ.data,"= (.*)")or string.match(aQ.data,"=(.*)")aQ.match=string.match(aQ.data,"(.*) =")or string.match(aQ.data,"(.*)=")local aO={data=string.match(aJ,"WHERE (.*)")}aO.equal=string.match(aO.data,"= (.*)")or string.match(aO.data,"=(.*)")aO.match=string.match(aO.data,"(.*) =")or string.match(aO.data,"(.*)=")local aP={set={string="",equal_table={},set_table={}},where={string="",equal_table={},where_table={}}}for ak in(aQ.match..","):gmatch("([^,]*),")do aP.set.string=aP.set.string..ak.."=@"..ak..","table.insert(aP.set.set_table,ak)end;for ak in(aQ.equal..","):gmatch("([^,]*),")do table.insert(aP.set.equal_table,ak)end;for ak in(aO.match..","):gmatch("([^,]*),")do aP.where.string=aP.where.string..ak.."=@"..ak..","table.insert(aP.where.where_table,ak)end;for ak in(aO.equal..","):gmatch("([^,]*),")do table.insert(aP.where.equal_table,ak)end;local aL={set=aP.set,where=aP.where}local aM=GetGameTimer()local aK=nil;developer("^3MySQL^0 ^3REQUESTING^0","update^5","UPDATE utility_db_integration SET "..aL.set.string:sub(1,-2).." WHERE "..aL.where.string:sub(1,-2))ESX.TriggerServerCallback("Utility:UpdateDataToDb",function(aN)aK=aN end,aL)while aK==nil do Citizen.Wait(5)end;developer("^3MySQL^0 ^2RESULT^0 (executed in "..(GetGameTimer()-aM)/1000 .."s)","updated^5",json.encode(aK))return aK end;SetFor=function(a7,aR,aS)if Utility.Cache["SetData"][a7]==nil then Utility.Cache["SetData"][a7]={}end;if type(aR)=="table"then for aT,aU in pairs(aR)do developer("^2Setting^0","data","("..a7 ..") ["..aT.." = "..json.encode(aU).."] {table}")Utility.Cache["SetData"][a7][aT]=aU end else developer("^2Setting^0","data","("..a7 ..") ["..aR.." = "..aS.."] {single}")Utility.Cache["SetData"][a7][aR]=aS end end;GetFrom=function(a7,aR)if aR==nil then aR="not defined"end;developer("^3Getting^0","data","("..a7 ..") ["..aR.."]")if Utility.Cache["SetData"][a7]~=nil then if aR=="not defined"then return Utility.Cache["SetData"][a7]else return Utility.Cache["SetData"][a7][aR]end else error("[GetFrom] Id "..a7 .." dont have any data!")return nil end end;_g=function(aV,aS)TriggerEvent("Utility:RegisterGlobal",aV,aS)end;RegisterNetEvent("Utility:RegisterGlobal",function(aV,aS)_G[aV]=aS end)RandomId=function(aW)aW=aW or 5;local aX=""for ag=1,aW do aX=aX.."9"end;return math.random(0,aX)end;CreateMarker=function(a7,J,aY,aZ,a_)if DoesExist("m",a7)then Citizen.Wait(100)return else a7=string.gsub(a7,"{r}",RandomId())developer("^2Created^0","Marker",a7)local b0=Utility.Cache.Marker;b0[a7]={render_distance=aY,interaction_distance=aZ,coords=J}if type(a_)=="table"then if a_.rgb~=nil then b0[a7].type=1;b0[a7].rgb=a_.rgb elseif a_.text~=nil then b0[a7].type=0;b0[a7].text=a_.text else b0[a7].type=1;b0[a7].rgb={a_[1],a_[2],a_[3]}r("Utility:UpdateTable","Marker",Utility.Cache.Marker)return end;if a_.type~=nil and type(a_.type)=="number"then b0[a7]._type=a_.type end;if a_.direction~=nil and type(a_.direction)=="vector3"then b0[a7]._direction=a_.direction end;if a_.rotation~=nil and type(a_.rotation)=="vector3"then b0[a7]._rot=a_.rotation end;if a_.scale~=nil and type(a_.scale)=="vector3"then b0[a7]._scale=a_.scale end;if a_.alpha~=nil and type(a_.alpha)=="number"then b0[a7].alpha=a_.alpha end;if a_.animation~=nil and type(a_.animation)=="boolean"then b0[a7].anim=a_.animation end;if a_.notify~=nil then local b1=string.multigsub(a_.notify,{"{A}","{B}","{C}","{D}","{E}","{F}","{G}","{H}","{L}","{M}","{N}","{O}","{P}","{Q}","{R}","{S}","{T}","{U}","{V}","{W}","{X}","{Y}","{Z}"},{"~INPUT_VEH_FLY_YAW_LEFT~","~INPUT_SPECIAL_ABILITY_SECONDARY~","~INPUT_LOOK_BEHIND~","~INPUT_MOVE_LR~","~INPUT_CONTEXT~","~INPUT_ARREST~","~INPUT_DETONATE~","~INPUT_VEH_ROOF~","~INPUT_CELLPHONE_CAMERA_FOCUS_LOCK~","~INPUT_INTERACTION_MENU~","~INPUT_REPLAY_ENDPOINT~","~INPUT_FRONTEND_PAUSE~","~INPUT_FRONTEND_LB~","~INPUT_RELOAD~","~INPUT_MOVE_DOWN_ONLY~","~INPUT_MP_TEXT_CHAT_ALL~","~INPUT_REPLAY_SCREENSHOT~","~INPUT_NEXT_CAMERA~","~INPUT_MOVE_UP_ONLY~","~INPUT_VEH_HOTWIRE_LEFT~","~INPUT_VEH_DUCK~","~INPUT_MP_TEXT_CHAT_TEAM~","~INPUT_HUD_SPECIAL~"})b0[a7].notify=b1 end elseif type(a_)=="string"then b0[a7].type=0;b0[a7].text=a_ end;r("Utility:UpdateTable","Marker",Utility.Cache.Marker)end end;SetMarkerType=function(a7,b2)if type(b2)~="number"then developer("^1Error^0","Type can be only a number","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7]._type=b2 else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end;r("Utility:UpdateTable","Marker",Utility.Cache.Marker)end;SetMarkerDirection=function(a7,b3)if type(b3)~="vector3"then developer("^1Error^0","Direction can be only a vector3","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7]._direction=b3 else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end;r("Utility:UpdateTable","Marker",Utility.Cache.Marker)end;SetMarkerRotation=function(a7,b4)if type(b4)~="vector3"then developer("^1Error^0","Rotation can be only a vector3","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7]._rot=b4 else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end;r("Utility:UpdateTable","Marker",Utility.Cache.Marker)end;SetMarkerScale=function(a7,R)if type(R)~="vector3"then developer("^1Error^0","Scale can be only a vector3","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7]._scale=R else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end;r("Utility:UpdateTable","Marker",Utility.Cache.Marker)end;SetMarkerColor=function(a7,b5)if type(b5)~="table"then developer("^1Error^0","Color can be only a vector3","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7].rgb=b5 else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end;r("Utility:UpdateTable","Marker",Utility.Cache.Marker)end;SetMarkerAlpha=function(a7,b6)if type(b6)~="number"then developer("^1Error^0","Alpha can be only a number","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7].alpha=b6 else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end;r("Utility:UpdateTable","Marker",Utility.Cache.Marker)end;SetMarkerAnimation=function(a7,a9)if type(a9)~="boolean"then developer("^1Error  ^0","Animation can be only a boolean (true/false)","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7].anim=a9 else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end;r("Utility:UpdateTable","Marker",Utility.Cache.Marker)end;SetMarkerDrawOnEntity=function(a7,a9)if type(a9)~="boolean"then developer("^1Error^0","Draw on entity can be only a boolean (true/false)","[Marker]")return end;if DoesExist("marker",a7)then Utility.Cache.Marker[a7].draw_entity=a9 else developer("^1Error^0","Unable to edit the marker as it does not exist",a7)end;r("Utility:UpdateTable","Marker",Utility.Cache.Marker)end;DeleteMarker=function(a7)if not DoesExist("m",a7)then Citizen.Wait(100)return else developer("^1Deleted^0","Marker",a7)Utility.Cache.Marker[a7]=nil;r("Utility:UpdateTable","Marker",Utility.Cache.Marker)end end;CreateiObject=function(a7,b7,b8,P,aZ,b9)developer("^2Created^0 Object "..a7 .." ("..b7 ..")")local _=CreateObject(GetHashKey(b7),b8.x,b8.y,b8.z,b9 or true,false,false)or nil;SetEntityHeading(_,P)SetEntityAsMissionEntity(_,true,true)FreezeEntityPosition(_,true)SetModelAsNoLongerNeeded(hash)Utility.Cache.Object[a7]={obj=_,coords=b8,interaction_distance=aZ or 3.0}r("Utility:UpdateTable","Object",Utility.Cache.Object)return _,g(_)end;DeleteiObject=function(a7,aI)developer("^1Deleted^0","Object",a7)table.remove(Utility.Cache.Object,a7)if aI then DeleteEntity(Utility.Cache.Object[a7].obj)end;r("Utility:UpdateTable","Object",Utility.Cache.Object)end;CreateBlip=function(aV,J,ba,bb,R)developer("^2Created^0","Blip",aV)local bc=AddBlipForCoord(J)SetBlipSprite(bc,ba)SetBlipScale(bc,R or 1.0)SetBlipColour(bc,bb)SetBlipAsShortRange(bc,true)BeginTextCommandSetBlipName('STRING')e(aV)EndTextCommandSetBlipName(bc)return bc end;SetIdOf=function(type,a7,bd)if type:lower()=="marker"or type:lower()=="m"then type="Marker"elseif type:lower()=="object"or type:lower()=="o"then type="Object"else return nil end;if DoesExist(type,a7)then Utility.Cache[type][bd]=Utility.Cache[type][a7]else developer("^1Error^0","Unable to set id of the "..type.." as it does not exist",a7)return end;developer("^3Change^0","Setted id to "..bd.." of the id",a7)table.remove(Utility.Cache[type],a7)r("Utility:UpdateTable",type,Utility.Cache[type])end;SetTextOf=function(type,a7,be)if type:lower()=="marker"or type:lower()=="m"then type="Marker"elseif type:lower()=="object"or type:lower()=="o"then type="Object"else return nil end;if DoesExist(type,a7)then Utility.Cache[type][a7].text=be else developer("^1Error^0","Unable to change text of the "..type.." as it does not exist",a7)return end;developer("^3Change^0","Setted text to "..be.." of the id",a7)r("Utility:UpdateTable",type,Utility.Cache[type])end;GetDistanceFrom=function(type,a7)if type:lower()=="marker"or type:lower()=="m"then type="Marker"elseif type:lower()=="object"or type:lower()=="o"then type="Object"else return nil end;local ah=0.0;if Utility.Cache[type][a7].coords~=nil then return p(g(PlayerPedId()),Utility.Cache[type][a7].coords,true)else return false end end;GetCoordOf=function(type,a7)if type:lower()=="marker"or type:lower()=="m"then type="Marker"elseif type:lower()=="object"or type:lower()=="o"then type="Object"else return nil end;if DoesExist(type,a7)then return Utility.Cache[type][a7].coords else developer("^1Error^0","Unable to get the coords of the id",a7)return false end end;DoesExist=function(type,a7)if type:lower()=="marker"or type:lower()=="m"then type="Marker"elseif type:lower()=="object"or type:lower()=="o"then type="Object"else return nil end;if Utility.Cache[type][a7]~=nil then return true else return false end end;CreateCamera=function(J,bf,a9,bg)local bh=CreateCam("DEFAULT_SCRIPTED_CAMERA",true)SetCamCoord(bh,J)if bf~=nil then SetCamRot(bh,bf.x,bf.y,bf.z)end;if bg~=nil then ShakeCam(bh,bg.type or"",bg.amount or 0.0)end;if a9 then SetCamActive(bh,true)RenderScriptCams(1,1,1500,1,1)end;return bh end;SwitchBetweenCam=function(bi,bh)SetCamActiveWithInterp(bh,bi,1500,1,1)Citizen.Wait(1600)DestroyCam(bi)end;DevMode=function(bj,ab,bk)if ab==nil then ab=true end;bk=bk or"%s %s %s"if bj then developer=function(bl,type,a7)local ak,ak,ak,bm,bn,bo=GetLocalTime()if ab then if type==nil then print(bm..":"..bn..":"..bo.." - "..bl)else print(bm..":"..bn..":"..bo.." - "..string.format(bk,bl,type,a7))end else if type==nil then print(bl)else print(string.format(bk,bl,type,a7))end end end else developer=function()end end end;ReplaceTexture=function(aG,bp,bq,br,bs)local bt=CreateRuntimeTxd('duiTxd')local bu=CreateDui(bq,br,bs)local bv=GetDuiHandle(bu)local bw=CreateRuntimeTextureFromDuiHandle(bt,'duiTex',bv)AddReplaceTexture(aG,bp,'duiTxd','duiTex')end;printd=function(bx)if type(bx)=="table"then print(json.encode(bx))else developer("^1Error","error dumping table "..bx.." why isnt a table","")end end;local by=string.gsub;string.multigsub=function(string,table,bz)if type(table)then for ag=1,#table do string=by(string,table[ag],bz[ag])end else for ag=1,#table do string=by(string,table[ag],bz)end end;return string end;table.fexist=function(bx,bA)bx=bx[bA]if not bx then return false else return true end end;local bB=table.remove;table.remove=function(bx,bC,bD)if type(bC)=="number"then bB(bx,bC)elseif type(bC)=="string"then for aT,aU in pairs(bx)do if aT==bC then bx[aT]=nil;if bD then break end end end end end;table.empty=function(bx)return next(bx)==nil end;table.clone=function(bx)bx.metatable={__index=bx}local bE={}setmetatable(bE,bx.metatable)return bE end;StartDialogue=function(a2,ah,bF)local bG=Utility.Cache.Dialogue;local bH=RandomId()bG[bH]={entity=a2,distance=ah,current_question=1,callback=bF}StopDialogue=function()developer("^1Stopping^0","dialogue",bH)if Utility.Cache.Dialogue[bH].lastq~=nil then local aw=0;local bI=Utility.Cache.Dialogue[bH].lastq;local bJ=Utility.Cache.Dialogue[bH].entity;local bK=GetEntityCoords(bJ)+vector3(0.0,0.0,1.0)CreateLoop(function()LoopThread(1,1000,function()bK=GetEntityCoords(bJ)+vector3(0.0,0.0,1.0)aw=aw+1 end)if aw==3 then _break()end;DrawText3Ds(bK,bI,nil,nil,true)end)end;Utility.Cache.Dialogue[bH]=nil;r("Utility:UpdateTable","Dialogue",Utility.Cache.Dialogue)end;EditDialogue=function()return{Question=function(...)local bL={...}bG[bH].questions=bL;return{Response=function(...)local bM={}local bN={}for bO,bP in pairs({...})do bN[bO]={}for aT,aU in pairs(bP)do if bM[bO]==nil then bM[bO]=""end;bM[bO]=bM[bO]..aT.."~w~ "..aU.." | "aT=string.multigsub(aT,{"%[","%]"},{"",""})aT=string.multigsub(aT,{"~r~","~b~","~g~","~y~","~p~","~o~","~c~","~m~","~u~","~n~","~s~","~w~"},{"","","","","","","","","","","",""})bN[bO][aT]=aU end;bM[bO]=bM[bO]:sub(1,-3)end;bG[bH].response={no_formatted=bN,formatted=bM}r("Utility:UpdateTable","Dialogue",Utility.Cache.Dialogue)return{LastQuestion=function(bQ)bG[bH].lastq=bQ;r("Utility:UpdateTable","Dialogue",Utility.Cache.Dialogue)end}end}end}end;developer("^2Created^0","dialogue",bH)return{Question=function(...)local bL={...}bG[bH].questions=bL;return{Response=function(...)local bM={}local bN={}for bO,bP in pairs({...})do bN[bO]={}for aT,aU in pairs(bP)do if bM[bO]==nil then bM[bO]=""end;bM[bO]=bM[bO]..aT.."~w~ "..aU.." | "aT=string.multigsub(aT,{"%[","%]"},{"",""})aT=string.multigsub(aT,{"~r~","~b~","~g~","~y~","~p~","~o~","~c~","~m~","~u~","~n~","~s~","~w~"},{"","","","","","","","","","","",""})bN[bO][aT]=aU end;bM[bO]=bM[bO]:sub(1,-3)end;bG[bH].response={no_formatted=bN,formatted=bM}r("Utility:UpdateTable","Dialogue",Utility.Cache.Dialogue)return{LastQuestion=function(bQ)bG[bH].lastq=bQ;r("Utility:UpdateTable","Dialogue",Utility.Cache.Dialogue)end}end}end}end